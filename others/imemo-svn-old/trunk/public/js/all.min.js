if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var hexcase=0;var b64pad="";function hex_md5(a){return rstr2hex(rstr_md5(str2rstr_utf8(a)))}function b64_md5(a){return rstr2b64(rstr_md5(str2rstr_utf8(a)))}function any_md5(a,b){return rstr2any(rstr_md5(str2rstr_utf8(a)),b)}function hex_hmac_md5(a,b){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function b64_hmac_md5(a,b){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)))}function any_hmac_md5(a,c,b){return rstr2any(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(c)),b)}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(a){return binl2rstr(binl_md5(rstr2binl(a),a.length*8))}function rstr_hmac_md5(c,f){var e=rstr2binl(c);if(e.length>16){e=binl_md5(e,c.length*8)}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828}var g=binl_md5(a.concat(rstr2binl(f)),512+f.length*8);return binl2rstr(binl_md5(d.concat(g),512+128))}function rstr2hex(c){try{hexcase}catch(g){hexcase=0}var f=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=f.charAt((a>>>4)&15)+f.charAt(a&15)}return b}function rstr2b64(c){try{b64pad}catch(h){b64pad=""}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b="";var a=c.length;for(var f=0;f<a;f+=3){var k=(c.charCodeAt(f)<<16)|(f+1<a?c.charCodeAt(f+1)<<8:0)|(f+2<a?c.charCodeAt(f+2):0);for(var d=0;d<4;d++){if(f*8+d*6>c.length*8){b+=b64pad}else{b+=g.charAt((k>>>6*(3-d))&63)}}}return b}function rstr2any(m,c){var b=c.length;var l,f,a,n,e;var k=Array(Math.ceil(m.length/2));for(l=0;l<k.length;l++){k[l]=(m.charCodeAt(l*2)<<8)|m.charCodeAt(l*2+1)}var h=Math.ceil(m.length*8/(Math.log(c.length)/Math.log(2)));var g=Array(h);for(f=0;f<h;f++){e=Array();n=0;for(l=0;l<k.length;l++){n=(n<<16)+k[l];a=Math.floor(n/b);n-=a*b;if(e.length>0||a>0){e[e.length]=a}}g[f]=n;k=e}var d="";for(l=g.length-1;l>=0;l--){d+=c.charAt(g[l])}return d}function str2rstr_utf8(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++}if(a<=127){b+=String.fromCharCode(a)}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63))}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63))}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63))}}}}}return b}function str2rstr_utf16le(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode(b.charCodeAt(c)&255,(b.charCodeAt(c)>>>8)&255)}return a}function str2rstr_utf16be(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode((b.charCodeAt(c)>>>8)&255,b.charCodeAt(c)&255)}return a}function rstr2binl(b){var a=Array(b.length>>2);for(var c=0;c<a.length;c++){a[c]=0}for(var c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(c%32)}return a}function binl2rstr(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(c%32))&255)}return a}function binl_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)}return Array(o,n,m,l)}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)}function md5_ff(g,f,l,k,e,j,h){return md5_cmn((f&l)|((~f)&k),g,f,e,j,h)}function md5_gg(g,f,l,k,e,j,h){return md5_cmn((f&k)|(l&(~k)),g,f,e,j,h)}function md5_hh(g,f,l,k,e,j,h){return md5_cmn(f^l^k,g,f,e,j,h)}function md5_ii(g,f,l,k,e,j,h){return md5_cmn(l^(f|(~k)),g,f,e,j,h)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))}jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(b){b.fn.ajaxSubmit=function(t){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof t=="function"){t={success:t}}var e=b.trim(this.attr("action"));if(e){e=(e.match(/^([^#]+)/)||[])[1]}e=e||window.location.href||"";t=b.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t||{});var v={};this.trigger("form-pre-serialize",[this,t,v]);if(v.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(t.beforeSerialize&&t.beforeSerialize(this,t)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var o=this.formToArray(t.semantic);if(t.data){t.extraData=t.data;for(var f in t.data){if(t.data[f] instanceof Array){for(var g in t.data[f]){o.push({name:f,value:t.data[f][g]})}}else{o.push({name:f,value:t.data[f]})}}}if(t.beforeSubmit&&t.beforeSubmit(o,this,t)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[o,this,t,v]);if(v.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var d=b.param(o);if(t.type.toUpperCase()=="GET"){t.url+=(t.url.indexOf("?")>=0?"&":"?")+d;t.data=null}else{t.data=d}var u=this,m=[];if(t.resetForm){m.push(function(){u.resetForm()})}if(t.clearForm){m.push(function(){u.clearForm()})}if(!t.dataType&&t.target){var r=t.success||function(){};m.push(function(j){b(t.target).html(j).each(r,arguments)})}else{if(t.success){m.push(t.success)}}t.success=function(q,k){for(var n=0,j=m.length;n<j;n++){m[n].apply(t,[q,k,u])}};var c=b("input:file",this).fieldValue();var s=false;for(var l=0;l<c.length;l++){if(c[l]){s=true}}var h=false;if((c.length&&t.iframe!==false)||t.iframe||s||h){if(t.closeKeepAlive){b.get(t.closeKeepAlive,p)}else{p()}}else{b.ajax(t)}this.trigger("form-submit-notify",[this,t]);return this;function p(){var x=u[0];if(b(":input[name=submit]",x).length){alert('Error: Form elements must not be named "submit".');return}var q=b.extend({},b.ajaxSettings,t);var H=b.extend(true,{},b.extend(true,{},b.ajaxSettings),q);var w="jqFormIO"+(new Date().getTime());var D=b('<iframe id="'+w+'" name="'+w+'" src="'+q.iframeSrc+'" />');var F=D[0];D.css({position:"absolute",top:"-1000px",left:"-1000px"});var G={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;D.attr("src",q.iframeSrc)}};var E=q.global;if(E&&!b.active++){b.event.trigger("ajaxStart")}if(E){b.event.trigger("ajaxSend",[G,q])}if(H.beforeSend&&H.beforeSend(G,H)===false){H.global&&b.active--;return}if(G.aborted){return}var k=0;var A=0;var j=x.clk;if(j){var y=j.name;if(y&&!j.disabled){t.extraData=t.extraData||{};t.extraData[y]=j.value;if(j.type=="image"){t.extraData[name+".x"]=x.clk_x;t.extraData[name+".y"]=x.clk_y}}}setTimeout(function(){var K=u.attr("target"),I=u.attr("action");x.setAttribute("target",w);if(x.getAttribute("method")!="POST"){x.setAttribute("method","POST")}if(x.getAttribute("action")!=q.url){x.setAttribute("action",q.url)}if(!t.skipEncodingOverride){u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(q.timeout){setTimeout(function(){A=true;B()},q.timeout)}var J=[];try{if(t.extraData){for(var L in t.extraData){J.push(b('<input type="hidden" name="'+L+'" value="'+t.extraData[L]+'" />').appendTo(x)[0])}}D.appendTo("body");F.attachEvent?F.attachEvent("onload",B):F.addEventListener("load",B,false);x.submit()}finally{x.setAttribute("action",I);K?x.setAttribute("target",K):u.removeAttr("target");b(J).remove()}},10);var z=50;function B(){if(k++){return}F.detachEvent?F.detachEvent("onload",B):F.removeEventListener("load",B,false);var I=true;try{if(A){throw"timeout"}var J,M;M=F.contentWindow?F.contentWindow.document:F.contentDocument?F.contentDocument:F.document;var N=q.dataType=="xml"||M.XMLDocument||b.isXMLDoc(M);a("isXml="+N);if(!N&&(M.body==null||M.body.innerHTML=="")){if(--z){k=0;setTimeout(B,100);return}a("Could not access iframe DOM after 50 tries.");return}G.responseText=M.body?M.body.innerHTML:null;G.responseXML=M.XMLDocument?M.XMLDocument:M;G.getResponseHeader=function(P){var O={"content-type":q.dataType};return O[P]};if(q.dataType=="json"||q.dataType=="script"){var n=M.getElementsByTagName("textarea")[0];if(n){G.responseText=n.value}else{var L=M.getElementsByTagName("pre")[0];if(L){G.responseText=L.innerHTML}}}else{if(q.dataType=="xml"&&!G.responseXML&&G.responseText!=null){G.responseXML=C(G.responseText)}}J=b.httpData(G,q.dataType)}catch(K){I=false;b.handleError(q,G,"error",K)}if(I){q.success(J,"success");if(E){b.event.trigger("ajaxSuccess",[G,q])}}if(E){b.event.trigger("ajaxComplete",[G,q])}if(E&&!--b.active){b.event.trigger("ajaxStop")}if(q.complete){q.complete(G,I?"success":"error")}setTimeout(function(){D.remove();G.responseXML=null},100)}function C(n,I){if(window.ActiveXObject){I=new ActiveXObject("Microsoft.XMLDOM");I.async="false";I.loadXML(n)}else{I=(new DOMParser()).parseFromString(n,"text/xml")}return(I&&I.documentElement&&I.documentElement.tagName!="parsererror")?I:null}}};b.fn.ajaxForm=function(c){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){b(this).ajaxSubmit(c);return false}).bind("click.form-plugin",function(j){var h=j.target;var f=b(h);if(!(f.is(":submit,input:image"))){var d=f.closest(":submit");if(d.length==0){return}h=d[0]}var g=this;g.clk=h;if(h.type=="image"){if(j.offsetX!=undefined){g.clk_x=j.offsetX;g.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=f.offset();g.clk_x=j.pageX-k.left;g.clk_y=j.pageY-k.top}else{g.clk_x=j.pageX-h.offsetLeft;g.clk_y=j.pageY-h.offsetTop}}}setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length==0){return p}var d=this[0];var h=q?d.getElementsByTagName("*"):d.elements;if(!h){return p}for(var k=0,m=h.length;k<m;k++){var e=h[k];var f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}var r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(var g=0,c=r.length;g<c;g++){p.push({name:f,value:r[g]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0],f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(typeof j=="undefined"){j=true}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null}if(q=="select"){var k=c.selectedIndex;if(k<0){return null}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value}if(g){return o}m.push(o)}}return m}return c.value};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();if(d=="text"||d=="password"||c=="textarea"){this.value=""}else{if(d=="checkbox"||d=="radio"){this.checked=false}else{if(c=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c==undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c==undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};function a(){if(b.fn.ajaxSubmit.debug&&window.console&&window.console.log){window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}}})(jQuery);(function(b){b.fn.tabsExtra=function(c){a(this);var d=b.extend({},b.fn.tabsExtra.defaults,c);return this.each(function(){$this=b(this);var g=b.meta?b.extend({},d,$this.data()):d;if(g.reload===true){var f=$this;var e=f.tabs("option","selected");if(typeof g.reloadIndex!="undefined"){f.tabs("load",g.reloadIndex)}else{f.tabs("load",e).tabs("select",e)}}})};function a(c){if(window.console&&window.console.log){}}b.fn.tabsExtra.reload=function(c){};b.fn.tabsExtra.defaults={}})(jQuery);(function(e){e.fn.timePicker=function(h){var j=e.extend({},e.fn.timePicker.defaults,h);return this.each(function(){e.timePicker(this,j)})};e.timePicker=function(k,h){var j=e(k)[0];return j.timePicker||(j.timePicker=new jQuery._timePicker(j,h))};e._timePicker=function(r,m){var u=false;var s=false;var k=d(m.startTime,m);var p=d(m.endTime,m);e(r).attr("autocomplete","OFF");var j=[];var l=new Date(k);while(l<=p){j[j.length]=g(l,m);l=new Date(l.setMinutes(l.getMinutes()+m.step))}var t=e('<div class="time-picker'+(m.show24Hours?"":" time-picker-12hours")+'"></div>');var n=e("<ul></ul>");for(var o=0;o<j.length;o++){n.append("<li>"+j[o]+"</li>")}t.append(n);var v=e(r).offset();t.appendTo("body").css({top:v.top,left:v.left}).hide();t.mouseover(function(){u=true}).mouseout(function(){u=false});e("li",n).mouseover(function(){if(!s){e("li.selected",t).removeClass("selected");e(this).addClass("selected")}}).mousedown(function(){u=true}).click(function(){f(r,this,t,m);u=false});var q=function(){if(t.is(":visible")){return false}e("li",t).removeClass("selected");t.show();var A=r.value?b(r.value,m):k;var z=k.getHours()*60+k.getMinutes();var y=(A.getHours()*60+A.getMinutes())-z;var w=Math.round(y/m.step);var x=a(new Date(0,0,0,0,(w*m.step+z),0));x=(k<x&&x<=p)?x:k;var B=e("li:contains("+g(x,m)+")",t);if(B.length){B.addClass("selected");t[0].scrollTop=B[0].offsetTop}return true};e(r).focus(q).click(q);e(r).blur(function(){if(!u){t.hide()}});var h=(e.browser.opera||e.browser.mozilla)?"keypress":"keydown";e(r)[h](function(B){var w;s=true;var A=t[0].scrollTop;switch(B.keyCode){case 38:if(q()){return false}w=e("li.selected",n);var y=w.prev().addClass("selected")[0];if(y){w.removeClass("selected");if(y.offsetTop<A){t[0].scrollTop=A-y.offsetHeight}}else{w.removeClass("selected");y=e("li:last",n).addClass("selected")[0];t[0].scrollTop=y.offsetTop-y.offsetHeight}return false;break;case 40:if(q()){return false}w=e("li.selected",n);var x=w.next().addClass("selected")[0];if(x){w.removeClass("selected");if(x.offsetTop+x.offsetHeight>A+t[0].offsetHeight){t[0].scrollTop=A+x.offsetHeight}}else{w.removeClass("selected");x=e("li:first",n).addClass("selected")[0];t[0].scrollTop=0}return false;break;case 13:if(t.is(":visible")){var z=e("li.selected",n)[0];f(r,z,t,m)}return false;break;case 27:t.hide();return false;break}return true});e(r).keyup(function(w){s=false});this.getTime=function(){return b(r.value,m)};this.setTime=function(w){r.value=g(a(w),m);e(r).change()}};e.fn.timePicker.defaults={step:30,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,30,0),separator:":",show24Hours:true};function f(l,k,h,j){l.value=e(k).text();e(l).change();if(!e.browser.msie){l.focus()}h.hide()}function g(n,m){var l=n.getHours();var j=m.show24Hours?l:(((l+11)%12)+1);var k=n.getMinutes();return c(j)+m.separator+c(k)+(m.show24Hours?"":((l<12)?" AM":" PM"))}function c(h){return(h<10?"0":"")+h}function d(h,j){return(typeof h=="object")?a(h):b(h,j)}function b(j,l){if(j){var n=j.split(l.separator);var h=parseFloat(n[0]);var k=parseFloat(n[1]);if(!l.show24Hours){if(h===12&&j.substr("AM")!==-1){h=0}else{if(h!==12&&j.indexOf("PM")!==-1){h+=12}}}var m=new Date(0,0,0,h,k,0);return a(m)}return null}function a(h){h.setFullYear(2001);h.setMonth(0);h.setDate(0);return h}})(jQuery);function ucwords(a){return a.replace(/\b\w+\b/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)})}function arrayIndexOf(c,a){var b=new RegExp(a,[""]);return(c.toString().replace(b,"|").replace(/[^,|]/g,"")).indexOf("|")}function LdsHelper(){}LdsHelper.prototype.parseIdArray=function(b,d){var c=b.toString()+",";switch(d){case"note_id":return c.match(/\d+(?!:)/g);break;case"category_id":return c.match(/\d+(?!,)/g);break;default:return false}};LdsHelper.prototype.setCurrentCategory=function(c){if(c.length>0){var b=c.text();var a=c.attr("id").replace("c","");__LDS_GLOBAL.category=b;__LDS_GLOBAL.category_id=a;$("#js_current_category").attr("value",__LDS_GLOBAL.category);b=null;current_category_index=null}};LdsHelper.prototype.makePassword=function(a){var b=a.toString().toUpperCase()+"LDS";b=hex_md5(b);return b};function IObserver(){}IObserver.prototype.update=function(a,b){};function ISubject(){this._ObserverList=[]}ISubject.prototype.addObserver=function(a){this._ObserverList.push(a);return this};ISubject.prototype.delObserver=function(a){};ISubject.prototype.notify=function(a,b){var b=b||{};for(i in this._ObserverList){this._ObserverList[i].update(this,b)}if(window.console&&window.console.log){console.log("notify at "+new Date())}};function Command(a){this.params=a||{}}Command.prototype.setParams=function(a){this.params=a};function CommandFactory(commandType){var command=ucwords(commandType);command+="Command";if(eval("typeof "+command+' != "undefined"')){return eval("new "+command+"()")}else{return new Command()}}function AddNoteCommand(a){Command.call(this);this.name="addNote"}AddNoteCommand.prototype=new Command();AddNoteCommand.prototype.success=function(){if(this.params.statusText&&this.params.statusText.toLowerCase()=="success"){try{var a=JSON.parse(this.params.responseText)}catch(c){var a={};throw"Error 0x0000: Response data is not a JSON!"}var b=new Note();b.makeNoteHTML(a);a=null;b=null}};AddNoteCommand.prototype.beforeSubmit=function(){var a=$(".ajax-add-note",this.params.jqForm).attr("value");if(a=="undefined"||a==""){return false}a=null};AddNoteCommand.prototype.getExtraData=function(){};function CreateCategoryCommand(a){Command.call(this);this.name="addNote"}CreateCategoryCommand.prototype=new Command();CreateCategoryCommand.prototype.success=function(){if(this.params.statusText&&this.params.statusText.toLowerCase()=="success"){try{var a=JSON.parse($.trim(this.params.responseText));if(a.data){$("#settings-tabs").tabsExtra({reload:true})}a=null}catch(b){throw"Error 0x0000: Response data is not a JSON!"}}};CreateCategoryCommand.prototype.beforeSubmit=function(){};CreateCategoryCommand.prototype.getExtraData=function(){};function AjaxForm(a){this.$_targetObj=a;this._URL=a.attr("action");this._command=""}AjaxForm.prototype.factory=function(){if(this.$_targetObj.length!=0){var a=this.makeAjaxFormOptions();this.$_targetObj.addClass("binded").ajaxForm(a)}};AjaxForm.prototype.makeAjaxFormOptions=function(){var d=this.parseURL(this._URL);var e=new CommandFactory(d);var b=new AjaxHelper(e);var a={beforeSubmit:function(g,f,c){return b.callback({status:"beforeSubmit",formData:g,jqForm:f,options:c})},success:function(c,f){return b.callback({status:"success",responseText:c,statusText:f})},data:b.getExtraData(),beforeSend:function(c){return b.callback({status:"beforeSend",XMLHttpRequest:"XMLHttpRequest"})},clearForm:true};return a};AjaxForm.prototype.parseURL=function(){var b="";var a=this._URL.split("/");var e=a[a.length-1];if(e.search("_")==-1){b=e}else{var c=e.split("_");for(var d=0;d<c.length;d++){if(d==0){b+=c[d]}else{b+=ucwords(c[d])}}}return b};function Note(a){this.note_id=a}Note.prototype.makeNoteHTML=function(d){var b=$("#js_note_template>li").clone(true);var c=d.data.category_id+":"+d.data.note_id;b.removeAttr("id").removeAttr("style");b.attr("id",c);b.find("td").not(".n.s").html("");b.find(".n_content").html(d.data.content);if(typeof d.data.dueDate!=="undefined"){b.find(".n_time").attr("value",d.data.dueDate.time).removeClass("c_min");if(typeof d.data.dueDate.dateHuman!=="undefined"){var a=d.data.dueDate.dateHuman}else{var a=d.data.dueDate.date}b.find(".n_date").attr("value",a).removeClass("c_min")}$(".notes_list:visible").append(b);b=null;c=null};function Output(){}Output.prototype.makeInputHTML=function(b,d,a){var c=$('<input type="hidden"></input>');c.attr("name",b);c.attr("value",d);if(a&&a.length!=0){a.append(c)}c=null};function AjaxHelper(a){this.command=a||null;this.params={}}AjaxHelper.prototype.setCommand=function(a){this.command=a};AjaxHelper.prototype.assignFunction=function(requestFunction){if(eval(requestFunction)&&eval(requestFunction)!=null){return eval(requestFunction+"();")}};AjaxHelper.prototype.callback=function(b){this.params=b;this.command.setParams(b);var a="this.command."+b.status;return this.assignFunction(a)};AjaxHelper.prototype.getExtraData=function(b){var a="this.command.getExtraData";return this.assignFunction(a)};AjaxHelper.prototype.getStatus=function(){if(this.params.statusText){return this.params.statusText}};AjaxHelper.prototype.getResponse=function(){if(this.params.responseText){return this.params.responseText}};function BubbleBind(){var a={_target:"",setTarget:function(b){this._target=b},bind:function(e,f,d,c,b){if(this._target==""){throw"target must be set up."}switch(f){case"":break;default:$(this._target).bind(f,function(g){if($.inArray(g.target,$(e))!=-1){d($(g.target))}})}},unload:function(){$(this._target).unbind();for(i in this){this[i]=null}}};return a}function BindCenter(){ISubject.call(this)}BindCenter.prototype=new ISubject();function BindAjaxForm(){IObserver.call(this)}BindAjaxForm.prototype.update=function(){$(".ajaxForm").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");var a=$(this);var b=new AjaxForm($(".ajaxForm"));b.factory();a=null;b=null}})};function BindDelButton(){IObserver.call(this);this._delAllNote}BindDelButton.prototype.update=function(){var a=this;$(".c_del").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");var b=$(this).parent();var c=$(this).children();c.click(function(){$("<p>Delete notes of this category?</p>").dialog({title:"Comfirm",bgiframe:true,resizable:false,height:140,modal:true,overlay:{backgroundColor:"#000",opacity:0.5},buttons:{"Just delete this category":function(){a._delAllNote=0;a.ajaxSend(b,c);$(this).dialog("close");b=null;c=null;a=null},"Delete notes":function(){a._delAllNote=1;a.ajaxSend(b,c);$(this).dialog("close");b=null;c=null;a=null}}})})}})};BindDelButton.prototype.ajaxSend=function(b,d){var e=b.find(".c_id").text();var a=d.attr("href");var c={categorys_id:e,delAllNote:this._delAllNote};$.ajax({type:"POST",url:a,data:c,beforeSend:function(f){},success:function(f){$("#settings-tabs").tabsExtra({reload:true})}});e=null;a=null;c=null};function BindLoginForm(){IObserver.call(this)}BindLoginForm.prototype.update=function(){var sThis=this;var $login_form=$("div#login_form");if($login_form.length<1||!$login_form.hasClass("binded")){$login_form.addClass("binded").dialog({width:340,bgiframe:true,autoOpen:false,modal:true,buttons:{},close:function(){}})}$login_form=null;var $form_login=$("#form_login");if(!$form_login.hasClass("binded")){$form_login.addClass("binded").submit(function(){var help=new LdsHelper();var $password_input=$(this).find("input[name=password]");var password=$password_input.attr("value");var newPassword=help.makePassword(password);$password_input.attr("value",newPassword);var $rePassword_input=$(this).find("input[name=repassword]");if($rePassword_input.length>0){var rePassword=$rePassword_input.attr("value");var newRePassword=help.makePassword(rePassword);$rePassword_input.attr("value",newRePassword)}})}var $fetch_captch=$("#ajax-fetch-captcha");if(!$fetch_captch.hasClass("binded")){$fetch_captch.addClass("binded");$fetch_captch.click(function(){var url=$(this).attr("href");$.ajax({type:"POST",dataType:"json",url:url,success:function(data,textStatus){var dataObj=eval("("+data+")");$("#captcha").empty().append(dataObj.captcha_html);$("#captcha_id").attr("value",dataObj.captcha_id)}});return false});$fetch_captch=null}var $input_captcha=$("#input_captcha");if(!$input_captcha.hasClass("binded")){$input_captcha.addClass("binded");$input_captcha.focus(function(){if(!$(this).hasClass("once")){$(this).addClass("once");$("#captcha>.loading").slideDown();$("#ajax-fetch-captcha").trigger("click")}})}$input_captcha=null;var $goto_register=$("#js_goto_register");if(!$goto_register.hasClass("binded")){$goto_register.addClass("binded");$goto_register.click(function(){$("#js_register").trigger("click");return false})}$goto_register=null};function BindNotes(){IObserver.call(this)}BindNotes.prototype.update=function(){var a=this;$(".notes_list").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");$(this).sortable({handle:".n_lable",cursorAt:{cursor:"crosshair",top:-3,left:-3},update:function(d,m){var f=new LdsHelper();var c=$(this).sortable("toArray");var k=$(m.item).attr("id").split(":");var e=k[1];var b=k[0];var l=f.parseIdArray(c,"note_id");var g=arrayIndexOf(l,e);var j=l[g-1];if((typeof j)=="undefined"){j=null}var h={index:e,front:j,categorys:b};a.sendSortData(h)}})}});this.bindState();this.bindContent()};BindNotes.prototype.sendSortData=function(b){var a=$("#sort_note_url").attr("href");$.ajax({type:"POST",url:a,data:b,beforeSend:function(c){},success:function(c){}});a=null};BindNotes.prototype.bindState=function(){$(".n_state>.checkbox").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");$(this).toggle(function(){$(this).parent().parent().addClass("done")},function(){$(this).parent().parent().removeClass("done")})}})};BindNotes.prototype.bindContent=function(){$(".n_content").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");var a=$(this).parent();var b;$(this).focus(function(){b=$(this).text()});$(this).blur(function(){var e=$(this).text();if(e!==b){var d=a.attr("id").split(":")[1];var f={content:e,note_id:d};var c=$("#alter_note_url").attr("href");$.post(c,f);b=null}e=null})}})};function BindHighLight(){IObserver.call(this)}BindHighLight.prototype.update=function(){$(".js_highlight").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");$(this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}})};__LDS_GLOBAL={};__LDS_GLOBAL.baseUrl="/";__LDS_GLOBAL.requestUrl=[];$(".request_url").each(function(){var b=$(this).attr("id");var a=$(this).attr("href");__LDS_GLOBAL.requestUrl[b]=a});$(window).load(function(){var d=new BindCenter();d.addObserver(new BindHighLight).addObserver(new BindAjaxForm).addObserver(new BindDelButton).addObserver(new BindNotes).addObserver(new BindLoginForm);d.notify();var b=new BubbleBind();var c=new LdsHelper();if($("body").attr("id").toLowerCase()=="default"&&$("#categorys").length>0){b.setTarget("#wrap");b.bind(".n_del a>span","click",function(l){var g=l.parent().parent().parent();var j=g.attr("id").split(":")[1];var k={note_id:j};var h=$("#del_note_url").attr("href");$.post(h,k,function(){});g.fadeOut("fast");g=null;j=null;k=null;h=null});b.bind(".n_date","click",function(g){if(!g.hasClass("binded")){g.removeClass("c_min").addClass("binded").datepicker({dateFormat:"yy-mm-dd",onClose:function(m,l){var h=__LDS_GLOBAL.requestUrl.alter_note_url;var j=g.parent().attr("id").split(":")[1];var k={note_id:j,dueDate_date:m};$.post(h,k);h=null;j=null;k=null}}).datepicker("show")}});b.bind(".n_time","mouseover",function(g){if(!g.hasClass("binded")){g.addClass("binded").timePicker()}});b.bind(".n_time","change",function(l){l.removeClass("c_min");var g=__LDS_GLOBAL.requestUrl.alter_note_url;var h=l.parent().attr("id").split(":")[1];var k=l.attr("value");var j={note_id:h,dueDate_time:k};$.post(g,j);g=null;h=null;j=null});$(window).keydown(function(g){if($(g.target).hasClass("n_content")){switch(g.keyCode){case 13:case 108:$(g.target).blur();return false;break;case 9:$(g.target).siblings().filter(".n_date").focus()}}});$("#categorys>li").each(function(g){$(this).data("i",g)});$("#main").tabs({panelsTarget:"#js_panelsTarget",spinner:"Retrieving data...",cache:true,cookie:{expires:30,name:"ui-tab"},select:function(g,h){var j=$(h.tab);c.setCurrentCategory(j);current_category=null}});var f=$("#main").tabs("option","selected");var e=$("#categorys").find("li>a").eq(f);c.setCurrentCategory(e);$("#categorys").sortable({axis:"y"});var a=$("#main ul:first li").droppable({tolerance:"pointer",accept:".connectedSortable li",hoverClass:"ui-state-hover",drop:function(k,m){var h=$(this);var g=h.data("i");var j=$("#change_category_url").attr("href");var l={old_category_id:__LDS_GLOBAL.category_id,new_category_id:h.find("a").attr("id").replace("c",""),note_id:$(m.draggable).attr("id").split(":")[1]};$.post(j,l,function(){m.draggable.hide("slow");$("#main").tabsExtra({reload:true,reloadIndex:g})});h=null;$list=null;j=null;l=null}});a=null}$("#settings-tabs").tabs({cookie:{expires:30,name:"settings-tab"}});$("#message").ajaxStart(function(){$(this).fadeIn();$("span",this).html("Loading")}).ajaxSend(function(){$("span",this).html("Loading")}).ajaxSuccess(function(){d.notify();$(this).fadeOut()}).ajaxError(function(){$("span",this).html("Error")});$("#search_text").focus(function(){var g=$(this).attr("value");$(this).attr("value","");$(this).blur(function(){var h=$(this).attr("value");if(h===null||h===""||h==g){$(this).attr("value",g);g=null}h=null})});$("#nav").sortable();$("#logout").click(function(){var g=$(this).attr("href");$("<p>Are you sure?</p>").dialog({title:"Comfirm",bgiframe:true,resizable:false,height:140,modal:true,overlay:{backgroundColor:"#000",opacity:0.5},buttons:{Comfirm:function(){location.href=g;g=null},Cancel:function(){$(this).dialog("close")}}});return false});$(".js_login").each(function(){$(this).click(function(){var h=$(this).attr("href");var j=$(this).attr("title");var g=$("div#login_form");if(g.length>0&&g.attr("title")==j){g.dialog("open")}else{if(g.length<1){g=$('<div id="login_form"></div>');$("body").append(g)}g.attr("title",j);g.load(h+" #form_login",{},function(){$("div#login_form").dialog("open");d.notify()})}h=null;j=null;g=null;return false})})});$(window).ready(function(){});