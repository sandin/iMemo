
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};


;(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
if(typeof options=='function')
options={success:options};var url=$.trim(this.attr('action'));if(url){url=(url.match(/^([^#]+)/)||[])[1];}
url=url||window.location.href||'';options=$.extend({url:url,type:this.attr('method')||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options||{});var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;for(var n in options.data){if(options.data[n]instanceof Array){for(var k in options.data[n])
a.push({name:n,value:options.data[n][k]});}
else
a.push({name:n,value:options.data[n]});}}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a);if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else
options.data=q;var $form=this,callbacks=[];if(options.resetForm)callbacks.push(function(){$form.resetForm();});if(options.clearForm)callbacks.push(function(){$form.clearForm();});if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){$(options.target).html(data).each(oldSuccess,arguments);});}
else if(options.success)
callbacks.push(options.success);options.success=function(data,status){for(var i=0,max=callbacks.length;i<max;i++)
callbacks[i].apply(options,[data,status,$form]);};var files=$('input:file',this).fieldValue();var found=false;for(var j=0;j<files.length;j++)
if(files[j])
found=true;var multipart=false;if((files.length&&options.iframe!==false)||options.iframe||found||multipart){if(options.closeKeepAlive)
$.get(options.closeKeepAlive,fileUpload);else
fileUpload();}
else
$.ajax(options);this.trigger('form-submit-notify',[this,options]);return this;function fileUpload(){var form=$form[0];if($(':input[name=submit]',form).length){alert('Error: Form elements must not be named "submit".');return;}
var opts=$.extend({},$.ajaxSettings,options);var s=$.extend(true,{},$.extend(true,{},$.ajaxSettings),opts);var id='jqFormIO'+(new Date().getTime());var $io=$('<iframe id="'+id+'" name="'+id+'" src="'+opts.iframeSrc+'" />');var io=$io[0];$io.css({position:'absolute',top:'-1000px',left:'-1000px'});var xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;$io.attr('src',opts.iframeSrc);}};var g=opts.global;if(g&&!$.active++)$.event.trigger("ajaxStart");if(g)$.event.trigger("ajaxSend",[xhr,opts]);if(s.beforeSend&&s.beforeSend(xhr,s)===false){s.global&&$.active--;return;}
if(xhr.aborted)
return;var cbInvoked=0;var timedOut=0;var sub=form.clk;if(sub){var n=sub.name;if(n&&!sub.disabled){options.extraData=options.extraData||{};options.extraData[n]=sub.value;if(sub.type=="image"){options.extraData[name+'.x']=form.clk_x;options.extraData[name+'.y']=form.clk_y;}}}
setTimeout(function(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(form.getAttribute('method')!='POST')
form.setAttribute('method','POST');if(form.getAttribute('action')!=opts.url)
form.setAttribute('action',opts.url);if(!options.skipEncodingOverride){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(opts.timeout)
setTimeout(function(){timedOut=true;cb();},opts.timeout);var extraInputs=[];try{if(options.extraData)
for(var n in options.extraData)
extraInputs.push($('<input type="hidden" name="'+n+'" value="'+options.extraData[n]+'" />').appendTo(form)[0]);$io.appendTo('body');io.attachEvent?io.attachEvent('onload',cb):io.addEventListener('load',cb,false);form.submit();}
finally{form.setAttribute('action',a);t?form.setAttribute('target',t):$form.removeAttr('target');$(extraInputs).remove();}},10);var domCheckCount=50;function cb(){if(cbInvoked++)return;io.detachEvent?io.detachEvent('onload',cb):io.removeEventListener('load',cb,false);var ok=true;try{if(timedOut)throw'timeout';var data,doc;doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:io.document;var isXml=opts.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&(doc.body==null||doc.body.innerHTML=='')){if(--domCheckCount){cbInvoked=0;setTimeout(cb,100);return;}
log('Could not access iframe DOM after 50 tries.');return;}
xhr.responseText=doc.body?doc.body.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;xhr.getResponseHeader=function(header){var headers={'content-type':opts.dataType};return headers[header];};if(opts.dataType=='json'||opts.dataType=='script'){var ta=doc.getElementsByTagName('textarea')[0];if(ta)
xhr.responseText=ta.value;else{var pre=doc.getElementsByTagName('pre')[0];if(pre)
xhr.responseText=pre.innerHTML;}}
else if(opts.dataType=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText);}
data=$.httpData(xhr,opts.dataType);}
catch(e){ok=false;$.handleError(opts,xhr,'error',e);}
if(ok){opts.success(data,'success');if(g)$.event.trigger("ajaxSuccess",[xhr,opts]);}
if(g)$.event.trigger("ajaxComplete",[xhr,opts]);if(g&&!--$.active)$.event.trigger("ajaxStop");if(opts.complete)opts.complete(xhr,ok?'success':'error');setTimeout(function(){$io.remove();xhr.responseXML=null;},100);};function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else
doc=(new DOMParser()).parseFromString(s,'text/xml');return(doc&&doc.documentElement&&doc.documentElement.tagName!='parsererror')?doc:null;};};};$.fn.ajaxForm=function(options){return this.ajaxFormUnbind().bind('submit.form-plugin',function(){$(this).ajaxSubmit(options);return false;}).bind('click.form-plugin',function(e){var target=e.target;var $el=$(target);if(!($el.is(":submit,input:image"))){var t=$el.closest(':submit');if(t.length==0)
return;target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);});};$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic){var a=[];if(this.length==0)return a;var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els)return a;for(var i=0,max=els.length;i<max;i++){var el=els[i];var n=el.name;if(!n)continue;if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
var v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(var j=0,jmax=v.length;j<jmax;j++)
a.push({name:n,value:v[j]});}
else if(v!==null&&typeof v!='undefined')
a.push({name:n,value:v});}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0],n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n)return;var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++)
a.push({name:n,value:v[i]});}
else if(v!==null&&typeof v!='undefined')
a.push({name:this.name,value:v});});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length))
continue;v.constructor==Array?$.merge(val,v):val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(typeof successful=='undefined')successful=true;if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1))
return null;if(tag=='select'){var index=el.selectedIndex;if(index<0)return null;var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v)
v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;if(one)return v;a.push(v);}}
return a;}
return el.value;};$.fn.clearForm=function(){return this.each(function(){$('input,select,textarea',this).clearFields();});};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=='text'||t=='password'||tag=='textarea')
this.value='';else if(t=='checkbox'||t=='radio')
this.checked=false;else if(tag=='select')
this.selectedIndex=-1;});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType))
this.reset();});};$.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select==undefined)select=true;return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio')
this.checked=select;else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};function log(){if($.fn.ajaxSubmit.debug&&window.console&&window.console.log)
window.console.log('[jquery.form] '+Array.prototype.join.call(arguments,''));};})(jQuery);

//
// create closure
//
(function($) {
  //
  // plugin definition
  //
  $.fn.tabsExtra = function(options) {
    debug(this);
    // build main options before element iteration
    var opts = $.extend({}, $.fn.tabsExtra.defaults, options);
    // iterate and reformat each matched element
    return this.each(function() {
      $this = $(this);
      // build element specific options
      var o = $.meta ? $.extend({}, opts, $this.data()) : opts;
      // update element styles
	  if (o.reload == true) {
		var $setTab = $this;
		var tab_index = $setTab.tabs('option', 'selected');
		$setTab.tabs('load',tab_index).tabs('select',tab_index);
	  }
	 
    });
  };
  //
  // private function for debugging
  //
  function debug($obj) {
    if (window.console && window.console.log)
	{}
  };
  //
  // define and expose our format function
  //
  $.fn.tabsExtra.reload = function($tab) {
  
  };
  //
  // plugin defaults
  //
  $.fn.tabsExtra.defaults = {
  };
//
// end of closure
//
})(jQuery); 
if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function ucwords(a){return a.replace(/\b\w+\b/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)})}function arrayIndexOf(c,a){var b=new RegExp(a,[""]);return(c.toString().replace(b,"|").replace(/[^,|]/g,"")).indexOf("|")}function LdsHelper(){}LdsHelper.prototype.parseIdArray=function(b,d){var c=b.toString()+",";switch(d){case"note_id":return c.match(/\d(?!:)/g);break;case"category_id":return c.match(/\d(?!,)/g);break;default:return false}};function IObserver(){}IObserver.prototype.update=function(a,b){};function ISubject(){this._ObserverList=[]}ISubject.prototype.addObserver=function(a){this._ObserverList.push(a);return this};ISubject.prototype.delObserver=function(a){};ISubject.prototype.notify=function(a,b){var b=b||{};for(i in this._ObserverList){this._ObserverList[i].update(this,b)}if(window.console&&window.console.log){console.log("notify at "+new Date())}};function Command(a){this.params=a||{}}Command.prototype.setParams=function(a){this.params=a};function CommandFactory(commandType){var command=ucwords(commandType);command+="Command";if(eval("typeof "+command+' != "undefined"')){return eval("new "+command+"()")}else{return new Command()}}function AddNoteCommand(a){Command.call(this);this.name="addNote"}AddNoteCommand.prototype=new Command();AddNoteCommand.prototype.success=function(){if(this.params.statusText&&this.params.statusText.toLowerCase()=="success"){try{var b=JSON.parse(this.params.responseText);var c=new Note();c.makeNoteHTML(b);b=null;c=null}catch(d){var a="Error: Response data is not a JSON!\n\n";a+="Code: 0x0000;\n\n";a+="Error name: "+d.name+"\n\n";a+="Error message: "+d.message+"\n\n";a+="Description: "+d.description+"\n\n";if(console&&console!=null){console.log(a)}else{alert(a)}a=null}}};AddNoteCommand.prototype.beforeSubmit=function(){var a=$(".ajax-add-note",this.params.jqForm).attr("value");if(a=="undefined"||a==""){return false}a=null};AddNoteCommand.prototype.getExtraData=function(){};function CreateCategoryCommand(a){Command.call(this);this.name="addNote"}CreateCategoryCommand.prototype=new Command();CreateCategoryCommand.prototype.success=function(){if(this.params.statusText&&this.params.statusText.toLowerCase()=="success"){try{var b=JSON.parse(this.params.responseText);if(b.data){$("#settings-tabs").tabsExtra({reload:true})}b=null}catch(c){var a="Error: Response data is not a JSON!\n\n";a+="Code: 0x0000;\n\n";a+="Error name: "+c.name+"\n\n";a+="Error message: "+c.message+"\n\n";a+="Description: "+c.description+"\n\n";if(console&&console!=null){console.log(a)}else{alert(a)}a=null}}};CreateCategoryCommand.prototype.beforeSubmit=function(){};CreateCategoryCommand.prototype.getExtraData=function(){};function AjaxForm(a){this.$_targetObj=a;this._URL=a.attr("action");this._command=""}AjaxForm.prototype.factory=function(){if(this.$_targetObj.length!=0){var a=this.makeAjaxFormOptions();this.$_targetObj.addClass("binded").ajaxForm(a)}};AjaxForm.prototype.makeAjaxFormOptions=function(){var d=this.parseURL(this._URL);var e=new CommandFactory(d);var b=new AjaxHelper(e);var a={beforeSubmit:function(g,f,c){return b.callback({status:"beforeSubmit",formData:g,jqForm:f,options:c})},success:function(c,f){return b.callback({status:"success",responseText:c,statusText:f})},data:b.getExtraData(),beforeSend:function(c){return b.callback({status:"beforeSend",XMLHttpRequest:"XMLHttpRequest"})},clearForm:true};return a};AjaxForm.prototype.parseURL=function(){var b="";var a=this._URL.split("/");var e=a[a.length-1];if(e.search("_")==-1){b=e}else{var c=e.split("_");for(var d=0;d<c.length;d++){if(d==0){b+=c[d]}else{b+=ucwords(c[d])}}}return b};function Note(a){this.note_id=a}Note.prototype.makeNoteHTML=function(c){var a=$("#js_note_template>li").clone(true);var b=c.data.category_id+":"+c.data.note_id;a.removeAttr("id").removeAttr("style");a.attr("id",b);a.find("td").not(".n.s").html("");a.find(".n_del>form>.note_id").attr("value",c.data.note_id);a.find(".n_content").html(c.data.content);$(".notes_list:visible").append(a);a=null;b=null};function Output(){}Output.prototype.makeInputHTML=function(b,d,a){var c=$('<input type="hidden"></input>');c.attr("name",b);c.attr("value",d);if(a&&a.length!=0){a.append(c)}c=null};function AjaxHelper(a){this.command=a||null;this.params={}}AjaxHelper.prototype.setCommand=function(a){this.command=a};AjaxHelper.prototype.assignFunction=function(requestFunction){if(eval(requestFunction)&&eval(requestFunction)!=null){return eval(requestFunction+"();")}};AjaxHelper.prototype.callback=function(b){this.params=b;this.command.setParams(b);var a="this.command."+b.status;return this.assignFunction(a)};AjaxHelper.prototype.getExtraData=function(b){var a="this.command.getExtraData";return this.assignFunction(a)};AjaxHelper.prototype.getStatus=function(){if(this.params.statusText){return this.params.statusText}};AjaxHelper.prototype.getResponse=function(){if(this.params.responseText){return this.params.responseText}};function BubbleBind(){var a={_target:"",setTarget:function(b){this._target=b},bind:function(e,f,d,c,b){if(this._target==""){throw"target must be set up."}switch(f){case"":break;default:$(this._target).bind(f,function(g){if($.inArray(g.target,$(e))!=-1){d($(g.target))}})}},unload:function(){$(this._target).unbind();for(i in this){this[i]=null}}};return a}function BindCenter(){ISubject.call(this)}BindCenter.prototype=new ISubject();function BindAjaxForm(){IObserver.call(this)}BindAjaxForm.prototype.update=function(){$(".ajaxForm").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");var a=$(this);var b=new AjaxForm($(".ajaxForm"));b.factory();a=null;b=null}})};function BindDelButton(){IObserver.call(this);this._delAllNote}BindDelButton.prototype.update=function(){var a=this;$(".c_del").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");var b=$(this).parent();var c=$(this).children();c.click(function(){$("<p>Delete notes of this category?</p>").dialog({title:"Comfirm",bgiframe:true,resizable:false,height:140,modal:true,overlay:{backgroundColor:"#000",opacity:0.5},buttons:{"Just delete this category":function(){a._delAllNote=0;a.ajaxSend(b,c);$(this).dialog("close");b=null;c=null;a=null},"Delete notes":function(){a._delAllNote=1;a.ajaxSend(b,c);$(this).dialog("close");b=null;c=null;a=null}}})})}})};BindDelButton.prototype.ajaxSend=function(b,d){var e=b.find(".c_id").text();var a=d.attr("href");var c={categorys_id:e,delAllNote:this._delAllNote};$.ajax({type:"POST",url:a,data:c,beforeSend:function(f){},success:function(f){$("#settings-tabs").tabsExtra({reload:true})}});e=null;a=null;c=null};function BindLoginForm(){IObserver.call(this)}BindLoginForm.prototype.update=function(){var sThis=this;var $login_form=$("div#login_form");if($login_form.length<1||!$login_form.hasClass("binded")){$login_form.addClass("binded").dialog({width:340,bgiframe:true,autoOpen:false,modal:true,buttons:{},close:function(){}})}var $fetch_captch=$("#ajax-fetch-captcha");if(!$fetch_captch.hasClass("binded")){$fetch_captch.addClass("binded");$fetch_captch.click(function(){var url=$(this).attr("href");$.ajax({type:"POST",dataType:"json",url:url,success:function(data,textStatus){var dataObj=eval("("+data+")");$("#captcha").empty().append(dataObj.captcha_html);$("#captcha_id").attr("value",dataObj.captcha_id)}});return false});$fetch_captch=null}var $input_captcha=$("#input_captcha");if(!$input_captcha.hasClass("binded")){$input_captcha.addClass("binded");$input_captcha.focus(function(){if(!$(this).hasClass("once")){$(this).addClass("once");$("#captcha>.loading").slideDown();$("#ajax-fetch-captcha").trigger("click")}})}$input_captcha=null;var $goto_register=$("#js_goto_register");if(!$goto_register.hasClass("binded")){$goto_register.addClass("binded");$goto_register.click(function(){$("#js_register").trigger("click");return false})}$goto_register=null};function BindNotes(){IObserver.call(this)}BindNotes.prototype.update=function(){var a=this;$(".notes_list").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");$(this).sortable({handle:".n_lable",cursorAt:{cursor:"crosshair",top:-3,left:-3},update:function(d,m){var f=new LdsHelper();var c=$(this).sortable("toArray");var k=$(m.item).attr("id").split(":");var e=k[1];var b=k[0];var l=f.parseIdArray(c,"note_id");var g=arrayIndexOf(l,e);var j=l[g-1];if((typeof j)=="undefined"){j=null}var h={index:e,front:j,categorys:b};a.sendSortData(h);f=null;c=null;k=null;e=null;b=null;l=null;g=null;j=null;h=null}})}});this.bindState();this.bindContent()};BindNotes.prototype.sendSortData=function(b){var a=$("#sort_note_url").attr("href");$.ajax({type:"POST",url:a,data:b,beforeSend:function(c){},success:function(c){}});a=null};BindNotes.prototype.bindState=function(){$(".n_state>.checkbox").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");$(this).toggle(function(){$(this).parent().parent().addClass("done")},function(){$(this).parent().parent().removeClass("done")})}})};BindNotes.prototype.bindContent=function(){$(".n_content").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");var a=$(this).parent();var b;$(this).focus(function(){b=$(this).html()});$(this).blur(function(){var e=$(this).html();if(e!==b){var d=a.attr("id").split(":")[1];var f={content:e,note_id:d};var c=$("#alter_note_url").attr("href");$.post(c,f)}e=null});a=null;b=null}})};function BindHighLight(){IObserver.call(this)}BindHighLight.prototype.update=function(){$(".js_highlight").each(function(){if(!$(this).hasClass("binded")){$(this).addClass("binded");$(this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}})};__LDS_GLOBAL={};__LDS_GLOBAL.baseUrl="/";$(window).load(function(){var d=new BindCenter();d.addObserver(new BindHighLight).addObserver(new BindAjaxForm).addObserver(new BindDelButton).addObserver(new BindNotes).addObserver(new BindLoginForm);d.notify();var b=new BubbleBind();if($("body").attr("id").toLowerCase()=="default"){b.setTarget("#content");b.bind(".n_del a>span","click",function(k){var f=k.parent().parent().parent();var h=f.attr("id").split(":")[1];var j={note_id:h};var g=$("#del_note_url").attr("href");$.post(g,j,function(){});f.fadeOut("fast");f=null;h=null;j=null;g=null});$("#main").tabs({panelsTarget:"#js_panelsTarget",spinner:"Retrieving data...",cache:true,cookie:{expires:30,name:"ui-tab"},select:function(f,g){var e=g.tab.text;__LDS_GLOBAL.category=e;$("#js_current_category").attr("value",e);e=null}});function c(){var f=$("#main").tabs("option","selected");var e=$("#categorys").find("li>a").eq(f).text();__LDS_GLOBAL.category=e;$("#js_current_category").attr("value",__LDS_GLOBAL.category);e=null;f=null}c();$("#categorys").sortable({axis:"y"});var a=$("#main ul:first li").droppable({tolerance:"pointer",accept:".connectedSortable li",hoverClass:"ui-state-hover",drop:function(g,h){var e=$(this);var f=$(e.find("a").attr("href")).find(".connectedSortable");h.draggable.hide("slow",function(){$("#main").tabs("select",$("#main ul:first li").index(e));$(this).prependTo(f).show("slow")});e=null;f=null}});a=null;$(".datepicker").datepicker({dateFormat:"yy-mm-dd",showOn:"button",buttonImage:"images/icon_calendar.gif"})}$("#settings-tabs").tabs({cookie:{expires:30,name:"settings-tab"}});$("#message").ajaxStart(function(){$(this).fadeIn();$("span",this).html("Loading")}).ajaxSend(function(){$("span",this).html("Loading")}).ajaxSuccess(function(){d.notify();$(this).fadeOut()}).ajaxError(function(){$("span",this).html("Error")});$("#search_text").focus(function(){var e=$(this).attr("value");$(this).attr("value","");$(this).blur(function(){var f=$(this).attr("value");if(f===null||f===""||f==e){$(this).attr("value",e);e=null}f=null})});$("#nav").sortable();$("#logout").click(function(){var e=$(this).attr("href");$("<p>Are you sure?</p>").dialog({title:"Comfirm",bgiframe:true,resizable:false,height:140,modal:true,overlay:{backgroundColor:"#000",opacity:0.5},buttons:{Comfirm:function(){location.href=e;e=null},Cancel:function(){$(this).dialog("close")}}});return false});$(".js_login").each(function(){$(this).click(function(){var f=$(this).attr("href");var g=$(this).attr("title");var e=$("div#login_form");if(e.length>0&&e.attr("title")==g){e.dialog("open")}else{if(e.length<1){e=$('<div id="login_form"></div>');$("body").append(e)}e.attr("title",g);e.load(f+" #form_login",{},function(){$("div#login_form").dialog("open");d.notify()})}f=null;g=null;e=null;return false})})});$(window).ready(function(){});